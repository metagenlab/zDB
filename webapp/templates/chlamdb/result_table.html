{% load custom_tags %}
<div style="margin-top: 3em;">
  <table class="data-table" width="100%" >
    <thead>
      <tr>
        <th></th>
        {% for header in table_headers %}
          <th>{{ header|safe }}</th>
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for index, row in table_data.iterrows %}
        <tr>
          <td>{{forloop.counter}}</td>
          {% for attrname in table_data_accessors%}
            <td>{{row|keyvalue:attrname|safe}}</td>
          {% endfor %}
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
$(document).ready(function() {
  $('.data-table').DataTable( {
    dom: 'lBfrtip',
    buttons: [
        {
            extend: 'colvis',
            columns: ':not(.noVis)',
        },
        {
            extend: 'excel',
            title: '{{tab.id}}'
        },
        {
            extend: 'csv',
            title: '{{tab.id}}'
        }
    ],
    "paging": true,
    "ordering": true,
    "info":     false,
    } );
} );

</script>
